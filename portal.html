<script>
  function submitComplaint() {
    const message = document.getElementById("grievance").value;
    const category = document.querySelector("input[name='category']:checked");
    const username = localStorage.getItem("gfUser") || "Unknown";

    if (!message || !category) {
      document.getElementById("response").innerText = "ðŸ˜¤ You missed something, Queen!";
      return;
    }

    const payload = {
      username: username,
      complaint: message,
      category: category.value
    };

    fetch("https://script.google.com/macros/s/AKfycbw1x3Icj-kb3u6vvnN89AVWKWCTyhSJ7V727MOiFn1dl8bcV1hmZPBBhukQGOmxhs7-GA/exec", {
      method: "POST",
      body: JSON.stringify(payload),
      headers: {
        "Content-Type": "application/json"
      }
    }).then(res => res.json())
      .then(data => {
        if (data.status === "success") {
          document.getElementById("response").innerHTML = "ðŸ“¬ Complaint submitted to royal archives!";
          document.getElementById("grievance").value = "";
          category.checked = false;
        } else {
          document.getElementById("response").innerText = "ðŸš¨ Something went wrong!";
        }
      });
  }
</script>
